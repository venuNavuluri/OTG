<?xml version="1.0" encoding="UTF-8"?>
<QuickAction xmlns="http://soap.sforce.com/2006/04/metadata">
    <fieldOverrides>
        <field>Legal_Entity__c</field>
        <formula>Opportunity.Legal_Entity__r.Id</formula>
    </fieldOverrides>
    <fieldOverrides>
        <field>Opportunity_Max_number_of_users__c</field>
        <formula>Opportunity.Max_number_of_users__c</formula>
    </fieldOverrides>
    <fieldOverrides>
        <field>Opportunity_Number_of_Installations__c</field>
        <formula>Opportunity.Number_of_Installations__c</formula>
    </fieldOverrides>
    <fieldOverrides>
        <field>SBQQ__Account__c</field>
        <formula>Opportunity.AccountId</formula>
    </fieldOverrides>
    <fieldOverrides>
        <field>SBQQ__EndDate__c</field>
        <formula>CASE(
    Opportunity.Term__c,
    12, DATE(YEAR(TODAY()) + FLOOR(12 / 12), MONTH(TODAY()) + MOD(12, 12), DAY(TODAY())) - 1,
    24, DATE(YEAR(TODAY()) + FLOOR(24 / 12), MONTH(TODAY()) + MOD(24, 12), DAY(TODAY())) - 1,
    36, DATE(YEAR(TODAY()) + FLOOR(36 / 12), MONTH(TODAY()) + MOD(36, 12), DAY(TODAY())) - 1,
    48, DATE(YEAR(TODAY()) + FLOOR(48 / 12), MONTH(TODAY()) + MOD(48, 12), DAY(TODAY())) - 1,
    NULL
)</formula>
    </fieldOverrides>
    <fieldOverrides>
        <field>SBQQ__LineItemsGrouped__c</field>
        <formula>true</formula>
    </fieldOverrides>
    <fieldOverrides>
        <field>SBQQ__Opportunity2__c</field>
        <formula>Opportunity.Id</formula>
    </fieldOverrides>
    <fieldOverrides>
        <field>SBQQ__Primary__c</field>
        <formula>true</formula>
    </fieldOverrides>
    <fieldOverrides>
        <field>SBQQ__PrimaryContact__c</field>
        <formula>Opportunity.Contact_Name__c</formula>
    </fieldOverrides>
    <fieldOverrides>
        <field>SBQQ__StartDate__c</field>
        <formula>TODAY()</formula>
    </fieldOverrides>
    <fieldOverrides>
        <field>SBQQ__SubscriptionTerm__c</field>
        <formula>Opportunity.Term__c</formula>
    </fieldOverrides>
    <label>New Quote</label>
    <optionsCreateFeedItem>true</optionsCreateFeedItem>
    <quickActionLayout>
        <layoutSectionStyle>TwoColumnsLeftToRight</layoutSectionStyle>
        <quickActionLayoutColumns>
            <quickActionLayoutItems>
                <emptySpace>false</emptySpace>
                <field>SBQQ__Account__c</field>
                <uiBehavior>Readonly</uiBehavior>
            </quickActionLayoutItems>
            <quickActionLayoutItems>
                <emptySpace>false</emptySpace>
                <field>SBQQ__SubscriptionTerm__c</field>
                <uiBehavior>Readonly</uiBehavior>
            </quickActionLayoutItems>
            <quickActionLayoutItems>
                <emptySpace>false</emptySpace>
                <field>SBQQ__BillingFrequency__c</field>
                <uiBehavior>Required</uiBehavior>
            </quickActionLayoutItems>
            <quickActionLayoutItems>
                <emptySpace>false</emptySpace>
                <field>Legal_Entity__c</field>
                <uiBehavior>Readonly</uiBehavior>
            </quickActionLayoutItems>
        </quickActionLayoutColumns>
        <quickActionLayoutColumns>
            <quickActionLayoutItems>
                <emptySpace>false</emptySpace>
                <field>SBQQ__Opportunity2__c</field>
                <uiBehavior>Readonly</uiBehavior>
            </quickActionLayoutItems>
            <quickActionLayoutItems>
                <emptySpace>false</emptySpace>
                <field>Agreement_Type__c</field>
                <uiBehavior>Required</uiBehavior>
            </quickActionLayoutItems>
            <quickActionLayoutItems>
                <emptySpace>false</emptySpace>
                <field>SBQQ__DeliveryMethod__c</field>
                <uiBehavior>Edit</uiBehavior>
            </quickActionLayoutItems>
        </quickActionLayoutColumns>
    </quickActionLayout>
    <targetObject>SBQQ__Quote__c</targetObject>
    <targetParentField>SBQQ__Opportunity2__c</targetParentField>
    <type>Create</type>
</QuickAction>
